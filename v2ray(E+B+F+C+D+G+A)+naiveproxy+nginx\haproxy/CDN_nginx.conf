#使用多组域名实现CDN应用与正常应用共存配置
#原配置参数：
#.........<省略>........
stream {
    map $ssl_preread_server_name $backend_name {
        zv.xx.yy  vless; #zv.xx.yy更改为自己规划对应vless+tcp+tls的域名
        zt.xx.yy trojan; #zt.xx.yy更改为自己规划对应trojan+tcp+tls的域名
        zh.xx.yy  https; #zh.xx.yy更改为自己规划对应https server的域名
    }
#.........<省略>........

#以上参数修改如下：
#.........<省略>........
stream {
    map $ssl_preread_server_name $backend_name {
        zv.xx.yy  vless; #zv.xx.yy更改为自己规划对应vless+tcp+tls的域名
        zt.xx.yy trojan; #zt.xx.yy更改为自己规划对应trojan+tcp+tls的域名
        zh.xx.yy  https; #zh.xx.yy更改为自己规划对应https server的域名
        z1.xx.yy  vless; #z1.xx.yy更改为自己规划对应vless+ws+tls的CDN应用域名
        z2.xx.yy trojan; #z2.xx.yy更改为自己规划对应SS+v2ray-plugin+tls的CDN应用域名
        z3.xx.yy  https; #z3.xx.yy更改为自己规划对应vless+grpc+tls的CDN应用域名
    }
#.........<省略>........
#注意：
#1、如域名使用通配符或SAN证书及密钥，除上面修改外无需其它调整。
#2、如域名使用caddy申请普通证书及密钥（详见Xray_naive_caddy.json）。caddy需增加上述域名证书申请及限定域名访问；还必须在Xray\v2ray配置中增加两组证书及密钥配置，及更改为caddy的申请证书及密钥路径（详见CDN_patch_v2ray_config.json）。
#3、如域名使用第三方申请普通证书及密钥；太麻烦，不推荐，也不提供方法。
