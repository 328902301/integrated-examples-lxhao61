//一、无SNI分流的反代为主应用（caddy提供https应用）
//原配置参数：
//.........<省略>........
            "match": [{
              "host": ["xx.yy"] //限定域名访问（禁止以ip方式访问网站），更改为自己的域名。
            }],
//.........<省略>........
      "certificates": {
        "automate": ["xx.yy"] //自动化管理域名证书（包括获取、更新证书及加载证书）。更改为自己的域名。
      }
//.........<省略>........

//以dns api方式申请tls证书（以上参数修改如下）：
//.........<省略>........
            "match": [{
              "host": ["*.xx.yy"] //限定域名访问（禁止以ip方式访问网站），更改为自己的域名。
            }],
//.........<省略>........
      "certificates": {
        "automate": ["*.xx.yy"] //自动化管理域名证书（包括获取、更新证书及加载证书）。更改为自己的域名。*.xx.yy表示申请通配符证书。
      },
      "automation": {
        "policies": [{
          "issuers": [{
            "module": "acme", //可以改为zerossl，采用zerossl申请证书及密钥。
            "challenges": {
              "dns": {
                "provider": {
                  "Language": "en",
                  "BaseURL": "https://dnsapi.cn",
                  "name": "dnspodcn",
                  "AppID": "1232456", //换成你dnspod.cn的DP_Id
                  "AppToken": "e09062f1fd2545555fc8a15fceda2222" //换成你dnspod.cn的DP_Key
                }
              }
            }
          }]
        }]
      }
    }
  }
}
//注意：
//1、caddy采用DNS challenge方式申请的通配符证书及密钥，仅此根域名二级域名能用，不包括根域名。
//2、调整限定域名访问范围，不严格可直接更改为通配符域名。


//二、无SNI分流的回落为主应用（caddy提供http应用）
//原配置参数：
//.........<省略>........
            "match": [{
              "host": ["xx.yy"] //限定域名访问（禁止以ip方式访问网站），修改成自己的域名。
            }],
//.........<省略>........
          "allow_h2c": true //开启h2c server支持
//.........<省略>........

//以dns api方式申请tls证书（以上参数修改如下）：
//.........<省略>........
            "match": [{
              "host": ["*.xx.yy"] //限定域名访问（禁止以ip方式访问网站），修改成自己的域名。
            }],
//.........<省略>........
          "allow_h2c": true //开启h2c server支持
        }
      }
    },
    "tls": {
      "certificates": {
        "automate": ["*.xx.yy"] //自动化管理域名证书（包括获取、更新证书及加载证书）。更改为自己的域名。*.xx.yy表示申请通配符证书。
      },
      "automation": {
        "policies": [{
          "storage": {
            "module": "file_system",
            "root": "/home/tls" //存放证书及密钥的基本路径
          },
          "issuers": [{
            "module": "acme", //必须acme与zerossl二选一（固定证书及密钥的绝对路径便于引用）。acme表示从Let's Encrypt申请证书及密钥，zerossl表示从ZeroSSL申请证书及密钥。
            "challenges": {
              "dns": {
                "provider": {
                  "Language": "en",
                  "BaseURL": "https://dnsapi.cn",
                  "name": "dnspodcn",
                  "AppID": "1232456", //换成你dnspod.cn的DP_Id
                  "AppToken": "e09062f1fd2545555fc8a15fceda2222" //换成你dnspod.cn的DP_Key
                }
              }
            }
          }]
        }]
      }
    }
  }
}
//注意：
//1、caddy采用DNS challenge方式申请的通配符证书及密钥，仅此根域名二级域名能用，不包括根域名。
//2、调整限定域名访问范围，不严格可直接更改为通配符域名。


//三、SNI分流的综合应用（caddy提供http与https应用）
//原配置参数：
//.........<省略>........
            "match": [{
              "host": ["zv.xx.yy","zt.xx.yy"] //限定域名访问（禁止以ip方式访问网站），更改为自己的对应回落域名。
            }],
//.........<省略>........
            "match": [{
              "host": ["zh.xx.yy"] //限定域名访问（禁止以ip方式访问网站），更改为自己的对应回落域名。
            }],
//.........<省略>........
          "tls_connection_policies": [{
            "certificate_selection": {
              "any_tag": ["tls01"]
            },
            "cipher_suites": ["TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384","TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256","TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256"],
            "alpn": ["h2","http/1.1"]
          }],
//.........<省略>........
        }
      }
    },
    "tls": {
      "certificates": {
        "load_files": [{
          "certificate": "/home/tls/certificates/acme-v02.api.letsencrypt.org-directory/zh.xx.yy/zh.xx.yy.crt", //换成你的证书，绝对路径。
          "key": "/home/tls/certificates/acme-v02.api.letsencrypt.org-directory/zh.xx.yy/zh.xx.yy.key", //换成你的密钥，绝对路径。
          "tags": ["tls01"]
        }]
      }
    }
  }
}

//以dns api方式申请tls证书（以上参数修改如下）：
//.........<省略>........
            "match": [{
              "host": ["*.xx.yy"] //限定域名访问（禁止以ip方式访问网站），更改为自己的对应回落域名。
            }],
//.........<省略>........
            "match": [{
              "host": ["*.xx.yy"] //限定域名访问（禁止以ip方式访问网站），更改为自己的对应回落域名。
            }],
//.........<省略>........
          "tls_connection_policies": [{
            "cipher_suites": ["TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384","TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256","TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256"],
            "alpn": ["h2","http/1.1"]
          }],
//.........<省略>........
        }
      }
    },
    "tls": {
      "certificates": {
        "automate": ["*.xx.yy"] //自动化管理域名证书（包括获取、更新证书及加载证书）。更改为自己的域名。*.xx.yy表示申请通配符证书。
      },
      "automation": {
        "policies": [{
          "storage": {
            "module": "file_system",
            "root": "/home/tls" //存放证书及密钥的基本路径
          },
          "issuers": [{
            "module": "acme", //必须acme与zerossl二选一（固定证书及密钥的绝对路径便于引用）。acme表示从Let's Encrypt申请证书及密钥，zerossl表示从ZeroSSL申请证书及密钥。
            "challenges": {
              "dns": {
                "provider": {
                  "Language": "en",
                  "BaseURL": "https://dnsapi.cn",
                  "name": "dnspodcn",
                  "AppID": "1232456", //换成你dnspod.cn的DP_Id
                  "AppToken": "e09062f1fd2545555fc8a15fceda2222" //换成你dnspod.cn的DP_Key
                }
              }
            }
          }]
        }]
      }
    }
  }
}
//注意：
//1、caddy采用DNS challenge方式申请的通配符证书及密钥，仅此根域名二级域名能用，不包括根域名。
//2、可能需要调整限定域名访问范围，不严格可直接更改为通配符域名。
